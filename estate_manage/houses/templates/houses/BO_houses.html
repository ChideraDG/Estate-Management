{% extends "building_owners/BO_dashboard.html" %}

{% block details %}
    <!-- Content -->

    <!-- Location header -->
    <h4 class="fw-bold py-3 mb-4">
        <span class="text-muted fw-light">House Management / 
            <a href='{% url "bo-houses" pk=request.user.profile %}?menu=All' class="text-muted fw-light">
                House Profiles
            </a> /
        </span> {{ menu }}
    </h4>
    <!-- End Location header -->

    <!-- House Profile -->
    <div class="nav-align-top mb-4">
        <!-- Tabs -->
        <ul class="nav nav-pills mb-3 nav-fill" role="tablist">
            <!--Houses Tabs Button -->
            <li class="nav-item">
                <button
                type="button"
                class="nav-link active"
                role="tab"
                data-bs-toggle="tab"
                data-bs-target="#navs-pills-justified-houses"
                aria-controls="navs-pills-justified-houses"
                aria-selected="true"
                >
                <i class="tf-icons bi bi-house-fill"></i> Houses
                <span class="badge rounded-pill badge-center h-px-20 w-px-20 bg-danger">{{houses.count}}</span>
                </button>
            </li>

            <!-- Add a House Tabs Button -->
            <li class="nav-item">
                <button
                type="button"
                class="nav-link"
                role="tab"
                data-bs-toggle="tab"
                data-bs-target="#navs-pills-justified-profile"
                aria-controls="navs-pills-justified-profile"
                aria-selected="false"
                >
                <i class="tf-icons bi bi-plus"></i> Add a House
                </button>
            </li>
        </ul>
        <!-- End Tabs -->

        <!-- Details -->
        <div class="tab-content">
            <!-- Houses Tabs Details -->
            <div class="tab-pane fade show active" id="navs-pills-justified-houses" role="tabpanel">
                <form class="d-flex" action='{% url "home" %}'>
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" />
                    <button class="btn btn-outline-primary" type="submit">Search</button>
                </form>
                <div class="nav-align-top mb-4">
                    <ul class="nav nav-pills mb-3 pt-3" role="tablist">
                      <li class="nav-item">
                        <button
                          type="button"
                          class="nav-link active"
                          role="tab"
                          data-bs-toggle="tab"
                          data-bs-target="#navs-pills-top-home"
                          aria-controls="navs-pills-top-home"
                          aria-selected="true"
                        >
                          Home
                        </button>
                      </li>
                      <li class="nav-item">
                        <button
                          type="button"
                          class="nav-link"
                          role="tab"
                          data-bs-toggle="tab"
                          data-bs-target="#navs-pills-top-profile"
                          aria-controls="navs-pills-top-profile"
                          aria-selected="false"
                        >
                          Profile
                        </button>
                      </li>
                      <li class="nav-item">
                        <button
                          type="button"
                          class="nav-link"
                          role="tab"
                          data-bs-toggle="tab"
                          data-bs-target="#navs-pills-top-messages"
                          aria-controls="navs-pills-top-messages"
                          aria-selected="false"
                        >
                          Messages
                        </button>
                      </li>
                    </ul>
                    <div class="tab-content">
                      <div class="tab-pane fade show active" id="navs-pills-top-home" role="tabpanel">
                        <p>
                          Icing pastry pudding oat cake. Lemon drops cotton candy caramels cake caramels sesame snaps
                          powder. Bear claw candy topping.
                        </p>
                        <p class="mb-0">
                          Tootsie roll fruitcake cookie. Dessert topping pie. Jujubes wafer carrot cake jelly. Bonbon
                          jelly-o jelly-o ice cream jelly beans candy canes cake bonbon. Cookie jelly beans marshmallow
                          jujubes sweet.
                        </p>
                      </div>
                      <div class="tab-pane fade" id="navs-pills-top-profile" role="tabpanel">
                        <p>
                          Donut dragée jelly pie halvah. Danish gingerbread bonbon cookie wafer candy oat cake ice
                          cream. Gummies halvah tootsie roll muffin biscuit icing dessert gingerbread. Pastry ice cream
                          cheesecake fruitcake.
                        </p>
                        <p class="mb-0">
                          Jelly-o jelly beans icing pastry cake cake lemon drops. Muffin muffin pie tiramisu halvah
                          cotton candy liquorice caramels.
                        </p>
                      </div>
                      <div class="tab-pane fade" id="navs-pills-top-messages" role="tabpanel">
                        <p>
                          Oat cake chupa chups dragée donut toffee. Sweet cotton candy jelly beans macaroon gummies
                          cupcake gummi bears cake chocolate.
                        </p>
                        <p class="mb-0">
                          Cake chocolate bar cotton candy apple pie tootsie roll ice cream apple pie brownie cake. Sweet
                          roll icing sesame snaps caramels danish toffee. Brownie biscuit dessert dessert. Pudding jelly
                          jelly-o tart brownie jelly.
                        </p>
                      </div>
                    </div>
                  </div>
            </div>
            <!-- End of Houses Tabs Details -->

            <!-- Add a House Tabs Details -->
            <div class="tab-pane fade" id="navs-pills-justified-profile" role="tabpanel">
              <form method="POST" enctype="multipart/form-data" action=''>
                  {% csrf_token %}
                  <div class="row">
                      {% for field in form %}
                          <div class="mb-3 col-md-6">
                              <label class="form-label">{{ field.label }}</label>
                              {{ field }}
                          </div>
                      {% endfor %}
                      <div class="mb-3 col-md-6">
                        <label class="form-label">Upload Images</label>
                        <input type="file" name='images' multiple class="form-control">
                      </div>
                  </div>
                  <div class="modal-footer">
                      <button type="submit" class="btn btn-primary me-2">Add House</button>
                  </div>
              </form>
            </div>
            <!-- End of Add a House Tabs Details -->
        </div>
        <!-- End Details -->
    </div>
    <!-- End Profile -->

    <script>
      document.addEventListener("DOMContentLoaded", function() {
        // Attach a change event listener to the country dropdown
        var countrySelect = document.getElementById('id_country');
        countrySelect.addEventListener('change', function() {
            var countryId = this.value;
            if (countryId) {
                fetch("{% url 'get-states' %}?country_id=" + countryId)
                    .then(response => response.json())
                    .then(data => {
                        var options = '<option value="">Select a state</option>';
                        data.forEach(function(state) {
                            options += '<option value="' + state.id + '">' + state.name + '</option>';
                        });
                        document.getElementById('id_state').innerHTML = options;
                    })
                    .catch(error => console.error("Error fetching states:", error));
            } else {
                document.getElementById('id_state').innerHTML = '';
            }
        });
      });        
  </script>

    <!-- End Content -->
{% endblock details %}
