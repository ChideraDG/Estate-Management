{% extends 'base.html'%}


{% block content%}
<style>
    .form-container{
      margin-top: 100px;
    }
  </style>
    <div class="form-container">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.as_p }}
            {% for field in form %}
    {% if field.errors %}
        <div class="error">{{ field.errors }}</div>
    {% endif %}
{% endfor %}
            <input type="submit" value="Submit">
        </form>

          <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script>
            $(document).ready(function() {
            $('#id_country').change(function() {
                var countryId = $(this).val();
                if (countryId) {
                    $.ajax({
                        url: "{% url 'get-states' %}",
                        data: {
                            'country_id': countryId
                        },
                        success: function(data) {
                            var options = '<option value="">Select a state</option>';
                            for (var i = 0; i < data.length; i++) {
                                options += '<option value="' + data[i].id + '">' + data[i].name + '</option>';
                            }
                            $('#id_state').html(options);
                        }
                    });
                } else {
                    $('#id_state').empty();
                }
            });
        });
    
        </script>
    </div>


{% endblock content%}